(function(b){var a={animationSpeed:500,customClass:"verticalyze-navy",navContent:true,navContentIndex:true};b.fn.verticalyzeNavy=function(n){b.extend(a,n);var c='<div class="'+a.customClass+'__wrapper">',l,g=a.customClass+"__nav",d,m=a.customClass+"__nav_dot",e=m+"_active",k,j='<ul class="'+g+'">',i=[],f=false;this.each(function(q){var p=b(this),r=p.offset().top,o=p.data("sectionName")||"",s=++q;navContentIndex=a.navContentIndex?s:"",navContent=a.navContent?o:"";i.push({name:"nav-"+s,offset:r,ref:p});j+='<li class="'+m+'" data-target="nav-'+s+'" data-nav-name="'+o+'">'+navContentIndex+" "+navContent+"</li>"});j+="</ul>";this.wrapAll(c).last().after(j);l=b("."+g),d=b("."+m);k=function(o){o.addClass(e).siblings().removeClass(e)};d.each(function(o){b(this).on("click",function(){var p=i[o].offset;var q=b(this);f=true;k(q);b("html,body").animate({scrollTop:p+1},a.animationSpeed);setTimeout(function(){f=false},a.animationSpeed)})});var h=function(){var p=b(window).scrollTop();if((window.innerHeight+window.scrollY)>=document.body.offsetHeight){targetNavDot=b("[data-target='"+i[i.length-1].name+"']");k(targetNavDot)}else{for(var o=i.length-1;o>-1;o--){console.log(i.length);if(i[o].offset<=p){targetNavDot=b("[data-target='"+i[o].name+"']");k(targetNavDot);return}}}};b(window).scroll(function(){if(f){return}else{h()}});h();return this}}(jQuery));
