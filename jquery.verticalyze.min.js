(function(b){var a={animationSpeed:500,customClass:"verticalyze-navy",navContent:true,navContentIndex:true};b.fn.verticalyzeNavy=function(m){b.extend(a,m);var c='<div class="'+a.customClass+'__wrapper">',k,f=a.customClass+"__nav",d,l=a.customClass+"__nav_dot",j,i='<ul class="'+f+'">',h=[],e=false;this.each(function(p){var o=b(this),q=o.offset().top,n=o.data("sectionName")||"",r=++p;navContentIndex=a.navContentIndex?r:"",navContent=a.navContent?n:"";h.push({name:"nav-"+r,offset:q,ref:o});i+='<li class="'+l+'" data-target="nav-'+r+'" data-nav-name="'+n+'">'+navContentIndex+" "+navContent+"</li>"});i+="</ul>";this.wrapAll(c).last().after(i);k=b("."+f),d=b("."+l);j=function(n){n.addClass(l+"_active").siblings().removeClass(l+"_active")};d.each(function(n){b(this).on("click",function(){var o=h[n].offset;var p=b(this);e=true;j(p);b("html,body").animate({scrollTop:o+1},a.animationSpeed);setTimeout(function(){e=false},a.animationSpeed)})});var g=function(){var o=b(window).scrollTop();if((window.innerHeight+window.scrollY)>=document.body.offsetHeight){targetNavDot=b("[data-target='"+h[h.length-1].name+"']");j(targetNavDot)}else{for(var n=h.length-1;n>-1;n--){if(h[n].offset<=o){targetNavDot=b("[data-target='"+h[n].name+"']");j(targetNavDot);return}}}};b(window).scroll(function(){if(e){return}else{g()}});g();return this}}(jQuery));
